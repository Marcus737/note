1. 主库的binlog记录所有的变更
2. 主库的log dump线程读取binlog的改变并发送给从库
3. 从库的IO线程接受binlog内容，将其写入relay log里
4. 从库的SQL线程读取relay log并执行sql，最从保证主从一致性

# 注意
- 主库使用binlog文件+position偏移量来确定同步的位置，从气节会保存其收到的偏移量，发生宕机时从偏移量同步
- 默认复制方式时异步的，不关心从库是否同步成功，因此主库宕机后，从库升级为主库，日志就丢失了，因此产生两个概念
    - 全同步复制 等所有从库执行成功后再返回给客户端
    - 半同步复制 只要有一个从库执行成功返回ACK就可以